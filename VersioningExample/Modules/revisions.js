function createRevision(entity, revisionAttr){	var revision = entityToObj(entity, revisionAttr);	revision.createdAt = new Date();	return revision;}function entityToObj(entity, revisionAttr){	var obj = {};	var modifiedAttrs = entity.getModifiedAttributes();	modifiedAttrs.forEach(function(attr){		if(attr != revisionAttr){			obj[attr] = entity[attr];		}	});	return obj;}exports.addRevision = function(entity, revisionAttr){	if(entity.revisions == null){		entity.revisions = {log: []};	}	var snapshot = entity.revisions;	var newRevision = createRevision(entity, revisionAttr);	snapshot.log.unshift(newRevision);	entity.revisions = snapshot;};